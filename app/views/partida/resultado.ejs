<%- include('../layout/header') %>
<div class="content-box-large">
	<div class="panel-heading">
	    <div class="panel-title">Registrar Resultado</div>
	</div>

	<div class="panel-body">
		<form class="form-horizontal" method="post" action="" role="form">
			<div class="col-sm-6">
				<div class="form-group">
					<label class="col-sm-4 control-label">Partida</label>
					<div class="col-sm-8">
						<select name="partida" class="form-control" required="" id="select-partida">
							<option value="">Selecione...</option>
							 <% partidas.forEach(function(partida){ %>
								<option value="<%=partida._id%>"
								data-jogador1="<%=partida.jogador_1.nome_completo%>" 
								data-jogador2="<%=partida.jogador_2.nome_completo%>">
								<%=partida.jogador_1.nome_completo%> X <%=partida.jogador_2.nome_completo%> (<%=partida.data%>)
								</option>
						     <% }); %>
						</select>
					</div>
				</div>

				<div class="form-group">
					<label class="col-sm-4 control-label" >Pontuação do Jogador <span style="color: #0000ff" id="jogador-1">1</span></label>
					<div class="col-sm-8">
						<input required type="text" name="pontuacao_jogador_1" class="form-control numerical">
					</div>
				</div>

				<div class="form-group">
					<label class="col-sm-4 control-label" >Pontuação do Jogador <span style="color: #0000ff" id="jogador-2">2</span></label>
					<div class="col-sm-8">
						<input required type="text" name="pontuacao_jogador_2" class="form-control numerical">
					</div>
				</div>

			</div>


			<div class="form-group">
				<div class="col-sm-offset-2 col-sm-10">
					<button type="submit" class="btn btn-primary">Registrar</button>
				</div>
			</div>
		</form>
	</div>
</div>
<%- include('../layout/footer') %>


<script>
	$(document).ready(function(){
		$("#select-partida").change(function(){
			if($(this).val()){
				var j1 = $(this).find('option:selected').data('jogador1');
				var j2 = $(this).find('option:selected').data('jogador2');
				$('#jogador-1').text(j1);
				$('#jogador-2').text(j2);
			}
			else{
				$('#jogador-1').text(1);
				$('#jogador-2').text(2);
			}
		});
	})
</script>

